webpackJsonp([2,0],{0:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var i=n(418),o=s(i),r=n(409),a=s(r),c=n(120),l=s(c);o.default.use(n(417)),o.default.use(l.default),new o.default({el:"#app",render:function(e){return e(a.default)}})},121:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(127),o=s(i),r=n(1),a=n(408);n(302),n(299),n(131),t.default={data:function(){return{content:""}},props:{hint:Boolean,code:String,value:String,unseenLines:Array,marker:Function,options:{type:Object,default:function(){return{styleActiveLine:!0,lineNumbers:!0,mode:"text/javascript",lineWrapping:!0}}}},created:function(){this.options=this.options||{};var e=this.options.mode||"text/javascript",t=this.options.theme,s=this.hint||!1,i=["css","html","javascript","sql","xml"];if("string"==typeof e)try{e=a.findModeByMIME(e).mode}catch(t){throw new Error("CodeMirror language mode: "+e+" configuration error (CodeMirror语言模式配置错误，或者不支持此语言) See http://codemirror.net/mode/ for more details.")}if("object"==("undefined"==typeof e?"undefined":(0,o.default)(e)))try{e=a.findModeByName(e.name).mode}catch(t){throw new Error("CodeMirror language mode: "+e.name+" configuration error (CodeMirror语言模式配置错误，或者不支持此语言) See http://codemirror.net/mode/ for more details.")}if(s){n(67),n(301);var r=i.indexOf(e)==-1;n(139)("./"+(r?"anyword":e)+"-hint.js")}this.options.styleActiveLine&&n(147),this.options.autoCloseBrackets&&n(132),this.options.autoCloseTags&&n(133),this.options.styleSelectedText&&(n(148),n(9)),this.options.highlightSelectionMatches&&(n(69),n(70),n(9),n(145)),this.options.keyMap&&["emacs","sublime","vim"].indexOf(this.options.keyMap)>-1&&(n(28),n(40),n(130),n(39),n(298),n(9),n(146),n(149)("./"+this.options.keyMap+".js")),this.options.foldGutter&&(n(300),n(134),n(135),n(65),n(136),n(137),n(138),n(66)),n(153)("./"+e+"/"+e+".js"),t&&"solarized light"==t&&(t="solarized"),t&&"default"!=t&&n(257)("./"+t+".css")},ready:function(){var e=this;this.editor=r.fromTextArea(this.$el,this.options),this.editor.setValue(this.code||this.value||this.content),this.editor.on("change",function(t){e.content=t.getValue(),e.code=t.getValue()})},mounted:function(){var e=this;this.editor=r.fromTextArea(this.$el,this.options),this.editor.setValue(this.code||this.value||this.content),this.editor.on("change",function(t){e.content=t.getValue(),e.$emit&&(e.$emit("changed",e.content),e.$emit("input",e.content))}),this.unseenLineMarkers()},watch:{code:function(e,t){var n=this.editor.getValue();if(e!==n){var s=this.editor.getScrollInfo();this.editor.setValue(e),this.content=e,this.editor.scrollTo(s.left,s.top)}this.unseenLineMarkers()},value:function(e,t){var n=this.editor.getValue();if(e!==n){var s=this.editor.getScrollInfo();this.editor.setValue(e),this.content=e,this.editor.scrollTo(s.left,s.top)}this.unseenLineMarkers()}},methods:{unseenLineMarkers:function(){var e=this;void 0!==e.unseenLines&&void 0!==e.marker&&e.unseenLines.forEach(function(t){var n=e.editor.lineInfo(t);e.editor.setGutterMarker(t,"breakpoints",n.gutterMarkers?null:e.marker())})}}}},122:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(){var e=document.createElement("div");return e.style.color="#fba949",e.innerHTML="|",e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(410),r=s(o),a=n(411),c=s(a),l=n(294),u=n(361),d=n(355),f=new u;t.default={data:function(){return{list:{name:"Root",path:"/",children:[]},currentOpenFilePath:"",openFiles:[],unseenFilePaths:[],unseenFolderPaths:[],unseenLine:[]}},computed:{},mounted:function(){var e=this,t=io.connect();t.on("list",function(t){e.list=t}),t.on("change",function(t){console.log("change "+t),e.addUnseenFile(t);var n=e.openFiles.find(function(e){return e.path===t});n&&e.getFile(t)})},methods:{getFile:function(e){var t=this,n=this;n.$http.get("/files"+e).then(function(s){var o=e.split("/").pop(),r={name:o,path:e,code:"",unseenLines:[],marker:i,editorOption:{tabSize:2,mode:"text/javascript",theme:"material",lineNumbers:!0,lineWrapping:!0,line:!0,readOnly:!0,gutters:["CodeMirror-linenumbers","breakpoints"]}},a=e.split(".").pop();switch(a){case"vue":r.editorOption.mode="script/x-vue";break;case"html":r.editorOption.mode="text/html";break;case"md":r.editorOption.mode="text/x-markdown";break;case"jsx":r.editorOption.mode="text/jsx";break;case"css":r.editorOption.mode="text/css";break;default:r.editorOption.mode="text/javascript"}var c=n.openFiles.find(function(t){return t.path===e});if(c){var u=l.diffLines(c.code,s.body);c.unseenLines=t.addUnseenLine(u),c.code=s.body}else{r.code=s.body,"string"!=typeof r.code&&(r.code="");var d=n.openFiles.findIndex(function(e){return e.path===n.currentOpenFilePath});n.openFiles.splice(d+1,0,r),n.currentOpenFilePath=e}},function(e){console.log(e)})},openFile:function(e){this.removeUnseenFile(e);var t=this;t.openFiles.find(function(t){return t.path===e})?t.currentOpenFilePath=e:t.getFile(e)},closeFile:function(e){var t=this.openFiles.findIndex(function(t){return t.path===e});if(this.openFiles.splice(t,1),this.currentOpenFilePath===e){var n=t<=0?t:t-1;0===this.openFiles.length?this.currentOpenFilePath="":this.currentOpenFilePath=this.openFiles[n].path}},addUnseenFile:function(e){var t=this;if(!this.unseenFilePaths.find(function(t){return t===e})){this.unseenFilePaths.push(e);var n=e.split("/");n.shift(),n.shift(),n.forEach(function(n){var s=e.substring(0,e.search("/"+n));t.unseenFolderPaths.push({path:s+"/",file:e})})}},removeUnseenFile:function(e){var t=this,n=this.unseenFilePaths.indexOf(e);if(n!==-1){this.unseenFilePaths.splice(n,1);var s=this.unseenFolderPaths.filter(function(t){return t.file===e});s.forEach(function(){var n=t.unseenFolderPaths.findIndex(function(t){return t.file===e});n!==-1&&t.unseenFolderPaths.splice(n,1)})}},addUnseenLine:function(e){var t=0,n=[];return e.forEach(function(e){if(void 0===e.added&&void 0===e.removed&&(t+=e.count),e.added)if(e.count>1)for(var s=0;s<e.count;s++)n.push(parseInt(t)),t++;else n.push(parseInt(t)),t+=e.count}),n},isUnseenTab:function(e){return this.unseenFilePaths.find(function(t){return t===e})},downloadZip:function(){var e=this;this.getZip(this.list),setTimeout(function(){f.generateAsync({type:"blob"}).then(function(t){d.saveAs(t,e.list.name+".zip")})},1500)},getZip:function(e){var t=this,n=this;e.children.forEach(function(e){var s=e.path.split(".").pop().toUpperCase();if("directory"===e.type)t.getZip(e);else if("file"!==e.type||"PNG"!==s&&"JPG"!==s&&"JPEG"!==s&&"ICO"!==s&&"SVG"!==s&&"GIF"!==s)"file"===e.type&&t.$http.get("/files"+e.path).then(function(t){f.file(n.list.name+e.path,t.body,{binary:!0})});else{var i=document.createElement("img");i.src="files"+e.path,i.onload=function(){var t=document.createElement("canvas");t.width=this.naturalWidth,t.height=this.naturalHeight,t.getContext("2d").drawImage(this,0,0);var s=t.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,"");f.file(n.list.name+e.path,s,{base64:!0})}}})}},components:{Item:r.default,Viewer:c.default}}},123:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"item",data:function(){return{open:!1}},mounted:function(){"/"===this.model.path&&(this.open=!0)},props:{model:Object,currentOpenFilePath:String,unseenFilePaths:Array,unseenFolderPaths:Array},computed:{isFolder:function(){return"directory"===this.model.type},isUnseenFile:function(){var e=this;return this.unseenFilePaths.find(function(t){return t===e.model.path})},isUnseenFolder:function(){var e=this;return this.unseenFolderPaths.find(function(t){return t.path===e.model.path})},isUnseen:function(){return this.isUnseenFile||this.isUnseenFolder},isNone:function(){return!this.isUnseenFile&&!this.isUnseenFolder&&this.currentOpenFilePath!==this.model.path},isActiveUnseen:function(){return this.currentOpenFilePath===this.model.path&&this.isUnseen}},methods:{openFile:function(e){this.$emit("openFile",e)},onClick:function(){this.isFolder?this.open=!this.open:this.$emit("openFile",this.model.path)}}}},124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(120);t.default={data:function(){return{}},props:["info","unseenLine"],computed:{isImage:function(){var e=this.info.path.split(".").pop();switch(e.toUpperCase()){case"PNG":case"JPG":case"JPEG":case"ICO":case"SVG":case"GIF":return!0}return!1}},mounted:function(){},methods:{},components:{codemirror:s.codemirror}}},139:function(e,t,n){function s(e){return n(i(e))}function i(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./anyword-hint.js":140,"./css-hint.js":141,"./html-hint.js":142,"./javascript-hint.js":143,"./show-hint.js":67,"./sql-hint.js":144,"./xml-hint.js":68};s.keys=function(){return Object.keys(o)},s.resolve=i,e.exports=s,s.id=139},149:function(e,t,n){function s(e){return n(i(e))}function i(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./emacs.js":150,"./sublime.js":151,"./vim.js":152};s.keys=function(){return Object.keys(o)},s.resolve=i,e.exports=s,s.id=149},153:function(e,t,n){function s(e){return n(i(e))}function i(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./apl/apl.js":154,"./asciiarmor/asciiarmor.js":155,"./asn.1/asn.1.js":156,"./asterisk/asterisk.js":157,"./brainfuck/brainfuck.js":158,"./clike/clike.js":28,"./clojure/clojure.js":159,"./cmake/cmake.js":160,"./cobol/cobol.js":161,"./coffeescript/coffeescript.js":71,"./commonlisp/commonlisp.js":162,"./crystal/crystal.js":163,"./css/css.js":23,"./cypher/cypher.js":164,"./d/d.js":165,"./dart/dart.js":166,"./diff/diff.js":167,"./django/django.js":168,"./dockerfile/dockerfile.js":169,"./dtd/dtd.js":170,"./dylan/dylan.js":171,"./ebnf/ebnf.js":172,"./ecl/ecl.js":173,"./eiffel/eiffel.js":174,"./elm/elm.js":175,"./erlang/erlang.js":176,"./factor/factor.js":177,"./fcl/fcl.js":178,"./forth/forth.js":179,"./fortran/fortran.js":180,"./gas/gas.js":181,"./gfm/gfm.js":182,"./gherkin/gherkin.js":183,"./go/go.js":184,"./groovy/groovy.js":185,"./haml/haml.js":186,"./handlebars/handlebars.js":72,"./haskell-literate/haskell-literate.js":187,"./haskell/haskell.js":73,"./haxe/haxe.js":188,"./htmlembedded/htmlembedded.js":189,"./htmlmixed/htmlmixed.js":5,"./http/http.js":190,"./idl/idl.js":191,"./javascript/javascript.js":14,"./jinja2/jinja2.js":192,"./jsx/jsx.js":193,"./julia/julia.js":194,"./livescript/livescript.js":195,"./lua/lua.js":196,"./markdown/markdown.js":74,"./mathematica/mathematica.js":197,"./mbox/mbox.js":198,"./meta.js":75,"./mirc/mirc.js":199,"./mllike/mllike.js":200,"./modelica/modelica.js":201,"./mscgen/mscgen.js":202,"./mumps/mumps.js":203,"./nginx/nginx.js":204,"./nsis/nsis.js":205,"./ntriples/ntriples.js":206,"./octave/octave.js":207,"./oz/oz.js":208,"./pascal/pascal.js":209,"./pegjs/pegjs.js":210,"./perl/perl.js":211,"./php/php.js":212,"./pig/pig.js":213,"./powershell/powershell.js":214,"./properties/properties.js":215,"./protobuf/protobuf.js":216,"./pug/pug.js":76,"./puppet/puppet.js":217,"./python/python.js":77,"./q/q.js":218,"./r/r.js":219,"./rpm/rpm.js":220,"./rst/rst.js":221,"./ruby/ruby.js":42,"./rust/rust.js":222,"./sas/sas.js":223,"./sass/sass.js":78,"./scheme/scheme.js":224,"./shell/shell.js":225,"./sieve/sieve.js":226,"./slim/slim.js":227,"./smalltalk/smalltalk.js":228,"./smarty/smarty.js":229,"./solr/solr.js":230,"./soy/soy.js":231,"./sparql/sparql.js":232,"./spreadsheet/spreadsheet.js":233,"./sql/sql.js":79,"./stex/stex.js":80,"./stylus/stylus.js":81,"./swift/swift.js":234,"./tcl/tcl.js":235,"./textile/textile.js":236,"./tiddlywiki/tiddlywiki.js":237,"./tiki/tiki.js":238,"./toml/toml.js":239,"./tornado/tornado.js":240,"./troff/troff.js":241,"./ttcn-cfg/ttcn-cfg.js":242,"./ttcn/ttcn.js":243,"./turtle/turtle.js":244,"./twig/twig.js":245,"./vb/vb.js":246,"./vbscript/vbscript.js":247,"./velocity/velocity.js":248,"./verilog/verilog.js":249,"./vhdl/vhdl.js":250,"./vue/vue.js":251,"./webidl/webidl.js":252,"./xml/xml.js":24,"./xquery/xquery.js":253,"./yacas/yacas.js":254,"./yaml-frontmatter/yaml-frontmatter.js":255,"./yaml/yaml.js":82,"./z80/z80.js":256};s.keys=function(){return Object.keys(o)},s.resolve=i,e.exports=s,s.id=153},257:function(e,t,n){function s(e){return n(i(e))}function i(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./3024-day.css":303,"./3024-night.css":304,"./abcdef.css":305,"./ambiance-mobile.css":306,"./ambiance.css":307,"./base16-dark.css":308,"./base16-light.css":309,"./bespin.css":310,"./blackboard.css":311,"./cobalt.css":312,"./colorforth.css":313,"./dracula.css":314,"./duotone-dark.css":315,"./duotone-light.css":316,"./eclipse.css":317,"./elegant.css":318,"./erlang-dark.css":319,"./hopscotch.css":320,"./icecoder.css":321,"./isotope.css":322,"./lesser-dark.css":323,"./liquibyte.css":324,"./material.css":325,"./mbo.css":326,"./mdn-like.css":327,"./midnight.css":328,"./monokai.css":329,"./neat.css":330,"./neo.css":331,"./night.css":332,"./panda-syntax.css":333,"./paraiso-dark.css":334,"./paraiso-light.css":335,"./pastel-on-dark.css":336,"./railscasts.css":337,"./rubyblue.css":338,"./seti.css":339,"./solarized.css":340,"./the-matrix.css":341,"./tomorrow-night-bright.css":342,"./tomorrow-night-eighties.css":343,"./ttcn.css":344,"./twilight.css":345,"./vibrant-ink.css":346,"./xq-dark.css":347,"./xq-light.css":348,"./yeti.css":349,"./zenburn.css":350};s.keys=function(){return Object.keys(o)},s.resolve=i,e.exports=s,s.id=257},298:function(e,t){},299:function(e,t){},300:function(e,t){},301:function(e,t){},302:function(e,t){},303:function(e,t){},304:function(e,t){},305:function(e,t){},306:function(e,t){},307:function(e,t){},308:function(e,t){},309:function(e,t){},310:function(e,t){},311:function(e,t){},312:function(e,t){},313:function(e,t){},314:function(e,t){},315:function(e,t){},316:function(e,t){},317:function(e,t){},318:function(e,t){},319:function(e,t){},320:function(e,t){},321:function(e,t){},322:function(e,t){},323:function(e,t){},324:function(e,t){},325:function(e,t){},326:function(e,t){},327:function(e,t){},328:function(e,t){},329:function(e,t){},330:function(e,t){},331:function(e,t){},332:function(e,t){},333:function(e,t){},334:function(e,t){},335:function(e,t){},336:function(e,t){},337:function(e,t){},338:function(e,t){},339:function(e,t){},340:function(e,t){},341:function(e,t){},342:function(e,t){},343:function(e,t){},344:function(e,t){},345:function(e,t){},346:function(e,t){},347:function(e,t){},348:function(e,t){},349:function(e,t){},350:function(e,t){},351:function(e,t){},352:function(e,t){},353:function(e,t){},354:function(e,t){},409:function(e,t,n){var s,i;n(352),s=n(122);var o=n(414);i=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(i=s=s.default),"function"==typeof i&&(i=i.options),i.render=o.render,i.staticRenderFns=o.staticRenderFns,e.exports=s},410:function(e,t,n){var s,i;n(351),s=n(123);var o=n(413);i=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(i=s=s.default),"function"==typeof i&&(i=i.options),i.render=o.render,i.staticRenderFns=o.staticRenderFns,e.exports=s},411:function(e,t,n){var s,i;n(354),s=n(124);var o=n(416);i=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(i=s=s.default),"function"==typeof i&&(i=i.options),i.render=o.render,i.staticRenderFns=o.staticRenderFns,e.exports=s},412:function(e,t,n){var s,i;n(353),s=n(121);var o=n(415);i=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(i=s=s.default),"function"==typeof i&&(i=i.options),i.render=o.render,i.staticRenderFns=o.staticRenderFns,e.exports=s},413:function(module,exports){module.exports={render:function(){with(this)return _h("li",{class:{"is-active-unseen":isActiveUnseen,"is-active":currentOpenFilePath===model.path,"is-unseen":isUnseen,"is-none":isNone}},[_h("div",{on:{click:onClick}},[isFolder?_h("span",[_s(open?"▼":"▶")]):_e(),"\n    "+_s(model.name)+"\n  "])," ",isFolder?_h("ul",{directives:[{name:"show",rawName:"v-show",value:open,expression:"open"}]},[_l(model.children,function(e){return _h("item",{staticClass:"item",attrs:{model:e,currentOpenFilePath:currentOpenFilePath,"unseen-file-paths":unseenFilePaths,"unseen-folder-paths":unseenFolderPaths},on:{openFile:openFile}})})]):_e()])},staticRenderFns:[]}},414:function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"app"},[_h("div",{staticClass:"left"},[_h("div",{staticClass:"tree"},[_h("ul",[_h("item",{staticClass:"item",attrs:{model:list,currentOpenFilePath:currentOpenFilePath,"unseen-file-paths":unseenFilePaths,"unseen-folder-paths":unseenFolderPaths},on:{openFile:openFile}})])])," ",_h("div",{staticClass:"download-button",attrs:{download:""},on:{click:downloadZip}},["\n      "+_s(list.name)+".zip\n    "])])," ",_h("div",{staticClass:"right"},[_h("ul",{staticClass:"tabs"},[_l(openFiles,function(e){return _h("li",{staticClass:"tabs-tab",class:{"is-active":currentOpenFilePath===e.path},on:{click:function(t){t.target===t.currentTarget&&openFile(e.path)}}},[_h("span",{staticClass:"tabs-tab-name",on:{click:function(t){t.target===t.currentTarget&&openFile(e.path)}}},[_s(e.name)])," ",_h("span",{staticClass:"icon",attrs:{style:"float: right;"},on:{click:function(t){closeFile(e.path)}}},[_h("i",{directives:[{name:"show",rawName:"v-show",value:!isUnseenTab(e.path),expression:"!isUnseenTab(file.path)"}],staticClass:"fa fa-close",attrs:{"aria-hidden":"true"}})," ",_h("i",{directives:[{name:"show",rawName:"v-show",value:isUnseenTab(e.path),expression:"isUnseenTab(file.path)"}],staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})])])})])," ",_h("div",{staticClass:"item-views"},[_l(openFiles,function(e){return _h("div",[currentOpenFilePath===e.path?_h("viewer",{attrs:{info:e,"unseen-line":unseenLine}}):_e()])})])])])},staticRenderFns:[]}},415:function(module,exports){module.exports={render:function(){with(this)return _m(0)},staticRenderFns:[function(){with(this)return _h("textarea")}]}},416:function(module,exports){module.exports={render:function(){with(this)return _h("div",[isImage?_e():_h("codemirror",{attrs:{code:info.code,options:info.editorOption,"unseen-lines":info.unseenLines,marker:info.marker}})," ",isImage?_h("div",{staticClass:"image-container"},[_h("img",{attrs:{src:"files/"+info.path,alt:""}})]):_e()])},staticRenderFns:[]}},421:function(e,t){}});
//# sourceMappingURL=app.80a6963d35b39e94d491.js.map